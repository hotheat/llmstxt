<!DOCTYPE html>

<html class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-develop/python/python-sdk-sandbox" data-has-hydrated="false" dir="ltr" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="Docusaurus v3.7.0" name="generator"/>
<title data-rh="true">Temporal Python SDK sandbox environment | Temporal Platform Documentation</title><meta content="width=device-width,initial-scale=1" data-rh="true" name="viewport"/><meta content="summary_large_image" data-rh="true" name="twitter:card"/><meta content="https://docs.temporal.io/img/assets/open-graph-shiny.png" data-rh="true" property="og:image"/><meta content="https://docs.temporal.io/img/assets/open-graph-shiny.png" data-rh="true" name="twitter:image"/><meta content="https://docs.temporal.io/develop/python/python-sdk-sandbox" data-rh="true" property="og:url"/><meta content="en" data-rh="true" property="og:locale"/><meta content="en" data-rh="true" name="docusaurus_locale"/><meta content="en" data-rh="true" name="docsearch:language"/><meta content="follow, index" data-rh="true" name="robots"/><meta content="current" data-rh="true" name="docusaurus_version"/><meta content="docs-default-current" data-rh="true" name="docusaurus_tag"/><meta content="current" data-rh="true" name="docsearch:version"/><meta content="docs-default-current" data-rh="true" name="docsearch:docusaurus_tag"/><meta content="Temporal Python SDK sandbox environment | Temporal Platform Documentation" data-rh="true" property="og:title"/><meta content="The Temporal Python SDK offers a sandbox environment to run Workflow code, aiming to prevent non-determinism errors in applications by isolating global state and applying restrictions." data-rh="true" name="description"/><meta content="The Temporal Python SDK offers a sandbox environment to run Workflow code, aiming to prevent non-determinism errors in applications by isolating global state and applying restrictions." data-rh="true" property="og:description"/><meta content="temporal python sdk,workflow sandbox,non-determinism errors,python sandbox environment,global state isolation,python workflow restrictions,passthrough modules,invalid module members,sandbox_unrestricted,unsandboxed workflow runner,sandboxed workflow runner,workflow determinism,skip workflow sandboxing,temporal workflow exceptions,deterministic workflow execution" data-rh="true" name="keywords"/><link data-rh="true" href="/img/favicon.svg" rel="icon"/><link data-rh="true" href="https://docs.temporal.io/develop/python/python-sdk-sandbox" rel="canonical"/><link data-rh="true" href="https://docs.temporal.io/develop/python/python-sdk-sandbox" hreflang="en" rel="alternate"/><link data-rh="true" href="https://docs.temporal.io/develop/python/python-sdk-sandbox" hreflang="x-default" rel="alternate"/><link crossorigin="anonymous" data-rh="true" href="https://T5D6KNJCQS-dsn.algolia.net" rel="preconnect"/><link href="/opensearch.xml" rel="search" title="Temporal Platform Documentation" type="application/opensearchdescription+xml"/>
<link href="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.css" rel="stylesheet"/>
<link as="document" href="https://iq.temporal.io" rel="preload"/>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" rel="stylesheet"/>
<script async="" defer="defer" src="/scripts/googletag.js"></script>
<script async="" data-modal-disclaimer="I am Temporal's AI developer assistant. I can access developer docs, forum posts, product blogs, and SDK references. Responses are generated by combining various sources to provide the best possible answer, however I may not be fully accurate, so please use your best judgement. If you have feedback please give a thumbs up or down as I continue to improve." data-modal-example-questions="What is Temporal?,How do I get started using Temporal?,I need a Workflow written in TypeScript,How do Signals work?" data-modal-title="Temporal's AI developer assistant" data-project-color="#000000" data-project-logo="https://avatars.githubusercontent.com/u/56493103?s=280&amp;v=4" data-project-name="Temporal" data-user-analytics-fingerprint-enabled="" data-website-id="91a88508-9cdc-441f-b1df-37aa9329e6bc" defer="defer" src="https://widget.kapa.ai/kapa-widget.bundle.js"></script>
<script async="" defer="defer" src="/scripts/copycode-notice.js"></script><link href="/assets/css/styles.50233c8a.css" rel="stylesheet"/>
<script defer="defer" src="/assets/js/runtime~main.f7e0581b.js"></script>
<script defer="defer" src="/assets/js/main.a2d776b6.js"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div aria-label="Skip to main content" role="region"><a class="skipToContent_QtLt" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-expanded="false" aria-label="Toggle navigation bar" class="navbar__toggle clean-btn" type="button"><svg aria-hidden="true" height="30" viewbox="0 0 30 30" width="30"><path d="M4 7h22M4 15h22M4 23h22" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"></path></svg></button><a class="navbar__brand" href="https://temporal.io" rel="noopener noreferrer" target="_blank"><div class="navbar__logo"><img alt="Temporal logo" class="themedComponent_kHbU themedComponent--light_tqeZ" src="/img/assets/temporal-logo-dark.svg"/><img alt="Temporal logo" class="themedComponent_kHbU themedComponent--dark_TUss" src="/img/assets/temporal-logo.svg"/></div></a><a class="navbar__item navbar__link" href="/">Home</a><a class="navbar__item navbar__link" href="https://learn.temporal.io/getting_started/" rel="noopener noreferrer" right="left" target="_blank">Start learning<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a><a class="navbar__item navbar__link" href="/develop" right="left">Start building</a><a class="navbar__item navbar__link" href="https://temporal.io/code-exchange" rel="noopener noreferrer" right="left" target="_blank">Code Exchange<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a><a class="navbar__item navbar__link" href="/cloud">Temporal Cloud</a></div><div class="navbar__items navbar__items--right"><div class="toggle_V9xM colorModeToggle_kzWL"><button aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false" class="clean-btn toggleButton_U5xw toggleButtonDisabled_Y6vk" disabled="" title="Switch between dark and light mode (currently light mode)" type="button"><svg class="lightToggleIcon_IKzY" height="24" viewbox="0 0 24 24" width="24"><path d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z" fill="currentColor"></path></svg><svg class="darkToggleIcon_BLKw" height="24" viewbox="0 0 24 24" width="24"><path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z" fill="currentColor"></path></svg></button></div><div class="navbarSearchContainer_Lkee"><button aria-label="Search (Command+K)" class="DocSearch DocSearch-Button" type="button"><span class="DocSearch-Button-Container"><svg aria-hidden="true" class="DocSearch-Search-Icon" height="20" viewbox="0 0 20 20" width="20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div class="navbar-sidebar__backdrop" role="presentation"></div></nav><div class="main-wrapper mainWrapper_HmbK" id="__docusaurus_skipToContent_fallback"><div class="docsWrapper_ruNH"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_JnKz" type="button"></button><div class="docRoot_y6yc"><aside class="theme-doc-sidebar-container docSidebarContainer_hpwb"><div class="sidebarViewport_bkwQ"><div class="sidebar_mhwn"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_KoUK"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Documentation Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/evaluate/">Evaluate</a><button aria-expanded="true" aria-label="Collapse sidebar category 'Evaluate'" class="clean-btn menu__caret" type="button"></button></div><ul class="menu__list" style="display:block;overflow:visible;height:auto"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/evaluate/why-temporal" tabindex="0">Why Temporal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/evaluate/understanding-temporal" tabindex="0">Understanding Temporal</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/evaluate/development-production-features/" tabindex="0">Features</a><button aria-expanded="false" aria-label="Expand sidebar category 'Features'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud/introduction" tabindex="0">Temporal Cloud</a><button aria-expanded="false" aria-label="Expand sidebar category 'Temporal Cloud'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/security" tabindex="0">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/evaluate/use-cases-design-patterns" tabindex="0">Use Cases</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menuExternalLink_Pkvp" href="https://learn.temporal.io/getting_started/" rel="noopener noreferrer" target="_blank">Get started<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/develop/">Develop</a><button aria-expanded="true" aria-label="Collapse sidebar category 'Develop'" class="clean-btn menu__caret" type="button"></button></div><ul class="menu__list" style="display:block;overflow:visible;height:auto"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/develop/go/" tabindex="0">Go SDK</a><button aria-expanded="false" aria-label="Expand sidebar category 'Go SDK'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/develop/java/" tabindex="0">Java SDK</a><button aria-expanded="false" aria-label="Expand sidebar category 'Java SDK'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/develop/php/" tabindex="0">PHP SDK</a><button aria-expanded="false" aria-label="Expand sidebar category 'PHP SDK'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/develop/python/" tabindex="0">Python SDK</a><button aria-expanded="true" aria-label="Collapse sidebar category 'Python SDK'" class="clean-btn menu__caret" type="button"></button></div><ul class="menu__list" style="display:block;overflow:visible;height:auto"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/core-application" tabindex="0">Core application</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/temporal-clients" tabindex="0">Temporal Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/develop/python/python-sdk-sandbox" tabindex="0">Python SDK sandbox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/python-sdk-sync-vs-async" tabindex="0">Python SDK sync vs async</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/testing-suite" tabindex="0">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/failure-detection" tabindex="0">Failure detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/message-passing" tabindex="0">Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/cancellation" tabindex="0">Interrupt a Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/asynchronous-activity-completion" tabindex="0">Asynchronous Activity Completion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/versioning" tabindex="0">Versioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/observability" tabindex="0">Observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/debugging" tabindex="0">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/schedules" tabindex="0">Schedules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/converters-and-encryption" tabindex="0">Converters and encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/timers" tabindex="0">Durable Timers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/child-workflows" tabindex="0">Child Workflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" href="/develop/python/continue-as-new" tabindex="0">Continue-As-New</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/develop/typescript/" tabindex="0">TypeScript SDK</a><button aria-expanded="false" aria-label="Expand sidebar category 'TypeScript SDK'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/develop/dotnet/" tabindex="0">.NET SDK</a><button aria-expanded="false" aria-label="Expand sidebar category '.NET SDK'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/develop/activity-retry-simulator" tabindex="0">Activity retry simulator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/develop/worker-performance" tabindex="0">Worker performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/develop/safe-deployments" tabindex="0">Safe deployments</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/production-deployment">Deploy to production</a><button aria-expanded="true" aria-label="Collapse sidebar category 'Deploy to production'" class="clean-btn menu__caret" type="button"></button></div><ul class="menu__list" style="display:block;overflow:visible;height:auto"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cloud" tabindex="0">Temporal Cloud</a><button aria-expanded="false" aria-label="Expand sidebar category 'Temporal Cloud'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/production-deployment/data-encryption" tabindex="0">Codecs and Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" href="/production-deployments/migration" tabindex="0">Migrate to Cloud</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/self-hosted-guide" tabindex="0">Self-host</a><button aria-expanded="false" aria-label="Expand sidebar category 'Self-host'" class="clean-btn menu__caret" type="button"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/cli">CLI (temporal)</a><button aria-expanded="false" aria-label="Expand sidebar category 'CLI (temporal)'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/references/">References</a><button aria-expanded="false" aria-label="Expand sidebar category 'References'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/troubleshooting/">Troubleshooting</a><button aria-expanded="false" aria-label="Expand sidebar category 'Troubleshooting'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/encyclopedia/">Encyclopedia</a><button aria-expanded="false" aria-label="Expand sidebar category 'Encyclopedia'" class="clean-btn menu__caret" type="button"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/glossary">Glossary</a></li></ul></nav><button aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_EBp1" title="Collapse sidebar" type="button"><svg aria-hidden="true" class="collapseSidebarButtonIcon_Snxh" height="20" width="20"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_iQPe"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_rCpc"><div class="docItemContainer_hbe2"><article><nav aria-label="Breadcrumbs" class="theme-doc-breadcrumbs breadcrumbsContainer_qWNH"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg class="breadcrumbHomeIcon_Xhh_" viewbox="0 0 24 24"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item" itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"><a class="breadcrumbs__link" href="/develop/" itemprop="item"><span itemprop="name">Develop</span></a><meta content="1" itemprop="position"/></li><li class="breadcrumbs__item" itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"><a class="breadcrumbs__link" href="/develop/python/" itemprop="item"><span itemprop="name">Python SDK</span></a><meta content="2" itemprop="position"/></li><li class="breadcrumbs__item breadcrumbs__item--active" itemprop="itemListElement" itemscope="" itemtype="https://schema.org/ListItem"><span class="breadcrumbs__link" itemprop="name">Python SDK sandbox</span><meta content="3" itemprop="position"/></li></ul></nav><div class="tocCollapsible_N7Vh theme-doc-toc-mobile tocMobile_Ntak"><button class="clean-btn tocCollapsibleButton_ZY7A" type="button">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Temporal Python SDK sandbox environment</h1></header><p>The Temporal Python SDK enables you to run Workflow code in a sandbox environment to help prevent non-determinism errors in your application.
The Temporal Workflow Sandbox for Python is not completely isolated, and some libraries can internally mutate state, which can result in breaking determinism.</p>
<h2 class="anchor anchorWithStickyNavbar_cvba" id="benefits">Benefits<a aria-label="Direct link to Benefits" class="hash-link" href="#benefits" title="Direct link to Benefits">​</a></h2>
<p>Temporal's Python SDK uses a sandbox environment for Workflow runs to make developing Workflow code safer.</p>
<p>If a Workflow Execution performs a non-deterministic event, an exception is thrown, which results in failing the Task Worker.
The Workflow will not progress until the code is fixed.</p>
<p>The Temporal Python sandbox offers a mechanism to <em>pass through modules</em> from outside the sandbox. By default, this includes all standard library modules and Temporal modules. For performance and behavior reasons, users are encouraged to pass through all third-party modules whose calls will be deterministic. For more information, see <a href="#passthrough-modules">Passthrough modules</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_cvba" id="how-it-works">How it works<a aria-label="Direct link to How it works" class="hash-link" href="#how-it-works" title="Direct link to How it works">​</a></h2>
<p>The Sandbox environment consists of two main components.</p>
<ul>
<li><a href="#global-state-isolation">Global state isolation</a></li>
<li><a href="#restrictions">Restrictions</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="global-state-isolation">Global state isolation<a aria-label="Direct link to Global state isolation" class="hash-link" href="#global-state-isolation" title="Direct link to Global state isolation">​</a></h3>
<p>The first component of the Sandbox is a global state isolation.
Global state isolation uses <code>exec</code> to compile and evaluate statements.</p>
<p>Upon the start of a Workflow, the file in which the Workflow is defined is imported into a newly created sandbox.</p>
<p>If a module is imported by the file, a known set, which includes all of Python's standard library, is <em>passed through</em> from outside the sandbox.</p>
<p>These modules are expected to be free of side effects and have their non-deterministic aspects restricted.</p>
<p>For a full list of modules imported, see <a href="#customize-the-sandbox">Customize the Sandbox</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="restrictions">Restrictions<a aria-label="Direct link to Restrictions" class="hash-link" href="#restrictions" title="Direct link to Restrictions">​</a></h3>
<p>Restrictions prevent known non-deterministic library calls.
This is achieved by using proxy objects on modules wrapped around the custom importer set in the sandbox.</p>
<p>Restrictions apply at both the Workflow import level and the Workflow run time.</p>
<p>A default set of restrictions that prevents most dangerous standard library calls.</p>
<h2 class="anchor anchorWithStickyNavbar_cvba" id="skip-workflow-sandboxing">Skip Workflow Sandboxing<a aria-label="Direct link to Skip Workflow Sandboxing" class="hash-link" href="#skip-workflow-sandboxing" title="Direct link to Skip Workflow Sandboxing">​</a></h2>
<p>The following techniques aren't recommended, but they allow you to avoid, skip, or break through the sandbox environment.</p>
<p>Skipping Workflow Sandboxing results in a lack of determinism checks. Using the Workflow Sandboxing environment helps to preventing non-determinism errors but doesn't completely negate the risk.</p>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="skip-sandboxing-for-a-block-of-code">Skip Sandboxing for a block of code<a aria-label="Direct link to Skip Sandboxing for a block of code" class="hash-link" href="#skip-sandboxing-for-a-block-of-code" title="Direct link to Skip Sandboxing for a block of code">​</a></h3>
<p>To skip a sandbox environment for a specific block of code in a Workflow, use <a href="https://python.temporal.io/temporalio.workflow.unsafe.html#sandbox_unrestricted" rel="noopener noreferrer" target="_blank"><code>sandbox_unrestricted()</code></a>. The Workflow will run without sandbox restrictions.</p>
<div class="language-python codeBlockContainer_WhOs theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_G9nB"><pre class="prism-code language-python codeBlock_FQ16 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e" tabindex="0"><code class="codeBlockLines_VK93"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> temporalio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">workflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">unsafe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">sandbox_unrestricted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Your code</span><br/></span></code></pre><div class="buttonGroup_B2Le"><button aria-label="Copy code to clipboard" class="clean-btn" title="Copy" type="button"><span aria-hidden="true" class="copyButtonIcons_qw2X"><svg class="copyButtonIcon_iWSc" viewbox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" fill="currentColor"></path></svg><svg class="copyButtonSuccessIcon_ksad" viewbox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="currentColor"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="skip-sandboxing-for-an-entire-workflow">Skip Sandboxing for an entire Workflow<a aria-label="Direct link to Skip Sandboxing for an entire Workflow" class="hash-link" href="#skip-sandboxing-for-an-entire-workflow" title="Direct link to Skip Sandboxing for an entire Workflow">​</a></h3>
<p>To skip a sandbox environment for a Workflow, set the <code>sandboxed</code> argument in the <a href="https://python.temporal.io/temporalio.workflow.html#defn" rel="noopener noreferrer" target="_blank"><code>@workflow.defn</code></a> decorator to false.
The entire Workflow will run without sandbox restrictions.</p>
<div class="language-python codeBlockContainer_WhOs theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_G9nB"><pre class="prism-code language-python codeBlock_FQ16 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e" tabindex="0"><code class="codeBlockLines_VK93"><span class="token-line" style="color:#bfc7d5"><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@workflow</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">defn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">sandboxed</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token boolean" style="color:rgb(255, 88, 116)">False</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre><div class="buttonGroup_B2Le"><button aria-label="Copy code to clipboard" class="clean-btn" title="Copy" type="button"><span aria-hidden="true" class="copyButtonIcons_qw2X"><svg class="copyButtonIcon_iWSc" viewbox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" fill="currentColor"></path></svg><svg class="copyButtonSuccessIcon_ksad" viewbox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="currentColor"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="skip-sandboxing-for-a-worker">Skip Sandboxing for a Worker<a aria-label="Direct link to Skip Sandboxing for a Worker" class="hash-link" href="#skip-sandboxing-for-a-worker" title="Direct link to Skip Sandboxing for a Worker">​</a></h3>
<p>To skip a sandbox environment for a Worker, set the <code>workflow_runner</code> keyword argument of the <code>Worker</code> init to <a href="https://python.temporal.io/temporalio.worker.UnsandboxedWorkflowRunner.html" rel="noopener noreferrer" target="_blank"><code>UnsandboxedWorkflowRunner()</code></a>.</p>
<h2 class="anchor anchorWithStickyNavbar_cvba" id="customize-the-sandbox">Customize the sandbox<a aria-label="Direct link to Customize the sandbox" class="hash-link" href="#customize-the-sandbox" title="Direct link to Customize the sandbox">​</a></h2>
<p>When creating the Worker, the <code>workflow_runner</code> defaults to <a href="https://python.temporal.io/temporalio.worker.workflow_sandbox.SandboxedWorkflowRunner.html" rel="noopener noreferrer" target="_blank"><code>SandboxedWorkflowRunner()</code></a>.
The <code>SandboxedWorkflowRunner</code> init accepts a <code>restrictions</code> keyword argument that defines a set of restrictions to apply to this sandbox.</p>
<p>The <code>SandboxRestrictions</code> dataclass is immutable and contains three fields that can be customized, but only two have notable values.</p>
<ul>
<li><a href="https://python.temporal.io/temporalio.worker.workflow_sandbox.SandboxRestrictions.html#passthrough_modules" rel="noopener noreferrer" target="_blank"><code>passthrough_modules</code></a></li>
<li><a href="https://python.temporal.io/temporalio.worker.workflow_sandbox.SandboxRestrictions.html#invalid_module_members" rel="noopener noreferrer" target="_blank"><code>invalid_modules_members</code></a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="passthrough-modules">Passthrough modules<a aria-label="Direct link to Passthrough modules" class="hash-link" href="#passthrough-modules" title="Direct link to Passthrough modules">​</a></h3>
<p>By default, the sandbox completely reloads non-standard-library and non-Temporal modules for every workflow run. Passing through a module means that the module will not be reloaded every time the Workflow runs. Instead, the module will be imported from outside the sandbox and used directly in the Workflow. This can improve performance because importing a module can be a time-consuming process, and passing through a module can avoid this overhead.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionHeading_TMsN"><span class="admonitionIcon_Ibzs"><svg viewbox="0 0 14 16"><path d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z" fill-rule="evenodd"></path></svg></span>note</div><div class="admonitionContent_vXIg"><p>It is important to note that you should only import <em>known-side-effect-free</em> third-party modules: meaning they don't have any unintended consequences when imported and used multiple times. This is because passing through a module means that it will be used multiple times in a workflow without being reloaded, so any side effects it has will be repeated. For this reason, it's recommended to only pass through modules that are known to be deterministic, meaning they will always produce the same output given the same input.</p></div></div>
<p>One way to pass through a module is at import time in the workflow file using the <a href="https://python.temporal.io/temporalio.workflow.unsafe.html#imports_passed_through" rel="noopener noreferrer" target="_blank"><code>imports_passed_through</code></a> context manager.</p>
<div class="language-python codeBlockContainer_WhOs theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_G9nB"><pre class="prism-code language-python codeBlock_FQ16 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e" tabindex="0"><code class="codeBlockLines_VK93"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># my_workflow_file.py</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> temporalio </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> workflow</span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">with</span><span class="token plain"> workflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">unsafe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">imports_passed_through</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> pydantic</span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">@workflow</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token decorator annotation punctuation" style="color:rgb(199, 146, 234)">defn</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MyWorkflow</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ...</span><br/></span></code></pre><div class="buttonGroup_B2Le"><button aria-label="Copy code to clipboard" class="clean-btn" title="Copy" type="button"><span aria-hidden="true" class="copyButtonIcons_qw2X"><svg class="copyButtonIcon_iWSc" viewbox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" fill="currentColor"></path></svg><svg class="copyButtonSuccessIcon_ksad" viewbox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="currentColor"></path></svg></span></button></div></div></div>
<p>Alternatively, this can be done at worker creation time by customizing the runner's restrictions.</p>
<div class="language-python codeBlockContainer_WhOs theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_G9nB"><pre class="prism-code language-python codeBlock_FQ16 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e" tabindex="0"><code class="codeBlockLines_VK93"><span class="token-line" style="color:#bfc7d5"><span class="token plain">my_worker </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Worker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  workflow_runner</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SandboxedWorkflowRunner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    restrictions</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SandboxRestrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">with_passthrough_modules</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">"pydantic"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre><div class="buttonGroup_B2Le"><button aria-label="Copy code to clipboard" class="clean-btn" title="Copy" type="button"><span aria-hidden="true" class="copyButtonIcons_qw2X"><svg class="copyButtonIcon_iWSc" viewbox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" fill="currentColor"></path></svg><svg class="copyButtonSuccessIcon_ksad" viewbox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="currentColor"></path></svg></span></button></div></div></div>
<p>In both of these cases, now the <code>pydantic</code> module will be passed through from outside the sandbox instead of being reloaded for every Workflow run.</p>
<h3 class="anchor anchorWithStickyNavbar_cvba" id="invalid-module-members">Invalid module members<a aria-label="Direct link to Invalid module members" class="hash-link" href="#invalid-module-members" title="Direct link to Invalid module members">​</a></h3>
<p><code>invalid_module_members</code> includes modules that cannot be accessed.</p>
<p>Checks are compared against the fully qualified path to the item.</p>
<p>For example, to remove a restriction on <code>datetime.date.today()</code>, see the following example.</p>
<div class="language-python codeBlockContainer_WhOs theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_G9nB"><pre class="prism-code language-python codeBlock_FQ16 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e" tabindex="0"><code class="codeBlockLines_VK93"><span class="token-line" style="color:#bfc7d5"><span class="token plain">my_restrictions </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> dataclasses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">replace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SandboxRestrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    invalid_module_members</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SandboxRestrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">invalid_module_members_default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">with_child_unrestricted</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token string" style="color:rgb(195, 232, 141)">"datetime"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"date"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">"today"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">my_worker </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Worker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> workflow_runner</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SandboxedWorkflowRunner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">restrictions</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">my_restrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre><div class="buttonGroup_B2Le"><button aria-label="Copy code to clipboard" class="clean-btn" title="Copy" type="button"><span aria-hidden="true" class="copyButtonIcons_qw2X"><svg class="copyButtonIcon_iWSc" viewbox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" fill="currentColor"></path></svg><svg class="copyButtonSuccessIcon_ksad" viewbox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="currentColor"></path></svg></span></button></div></div></div>
<p>Restrictions can also be added by piping (<code>|</code>) together matchers.</p>
<p>The following example restricts the <code>datetime.date</code> class from being used.</p>
<div class="language-python codeBlockContainer_WhOs theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_G9nB"><pre class="prism-code language-python codeBlock_FQ16 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e" tabindex="0"><code class="codeBlockLines_VK93"><span class="token-line" style="color:#bfc7d5"><span class="token plain">my_restrictions </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> dataclasses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">replace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SandboxRestrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">default</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    invalid_module_members</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SandboxRestrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">invalid_module_members_default </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> SandboxMatcher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      children</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">"datetime"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> SandboxMatcher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">use</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">"date"</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br/></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">my_worker </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> Worker</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> workflow_runner</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">SandboxedWorkflowRunner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">restrictions</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">my_restrictions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br/></span></code></pre><div class="buttonGroup_B2Le"><button aria-label="Copy code to clipboard" class="clean-btn" title="Copy" type="button"><span aria-hidden="true" class="copyButtonIcons_qw2X"><svg class="copyButtonIcon_iWSc" viewbox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" fill="currentColor"></path></svg><svg class="copyButtonSuccessIcon_ksad" viewbox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z" fill="currentColor"></path></svg></span></button></div></div></div>
<p>For more information on the Python sandbox, see the following resources.</p>
<ul>
<li><a href="https://github.com/temporalio/sdk-python" rel="noopener noreferrer" target="_blank">Python SDK README</a></li>
<li><a href="https://python.temporal.io/index.html" rel="noopener noreferrer" target="_blank">Python API docs</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_ehQq padding--none margin-left--sm"><li class="tag_BQf1"><a class="tag_CFAW tagRegular_aCRj" href="/tags/temporal-sd-ks">Temporal SDKs</a></li><li class="tag_BQf1"><a class="tag_CFAW tagRegular_aCRj" href="/tags/python-sdk">Python SDK</a></li><li class="tag_BQf1"><a class="tag_CFAW tagRegular_aCRj" href="/tags/concepts">Concepts</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><div style="margin-top:20px;padding:10px 15px;border-radius:8px;border-left:4px solid #007bff;display:flex;flex-direction:column;align-items:flex-start"><p style="margin:0;font-weight:500">Help us make Temporal better. Contribute to our <a href="https://github.com/temporalio/documentation">documentation</a>.</p></div></div><div class="col lastUpdated_oLxI"></div></div></footer></article><nav aria-label="Docs pages" class="pagination-nav docusaurus-mt-lg"><a class="pagination-nav__link pagination-nav__link--prev" href="/develop/python/temporal-clients"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Temporal Client</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/develop/python/python-sdk-sync-vs-async"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Python SDK sync vs async</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_DY1A thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="#benefits">Benefits</a></li><li><a class="table-of-contents__link toc-highlight" href="#how-it-works">How it works</a><ul><li><a class="table-of-contents__link toc-highlight" href="#global-state-isolation">Global state isolation</a></li><li><a class="table-of-contents__link toc-highlight" href="#restrictions">Restrictions</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="#skip-workflow-sandboxing">Skip Workflow Sandboxing</a><ul><li><a class="table-of-contents__link toc-highlight" href="#skip-sandboxing-for-a-block-of-code">Skip Sandboxing for a block of code</a></li><li><a class="table-of-contents__link toc-highlight" href="#skip-sandboxing-for-an-entire-workflow">Skip Sandboxing for an entire Workflow</a></li><li><a class="table-of-contents__link toc-highlight" href="#skip-sandboxing-for-a-worker">Skip Sandboxing for a Worker</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="#customize-the-sandbox">Customize the sandbox</a><ul><li><a class="table-of-contents__link toc-highlight" href="#passthrough-modules">Passthrough modules</a></li><li><a class="table-of-contents__link toc-highlight" href="#invalid-module-members">Invalid module members</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://github.com/temporalio" rel="noopener noreferrer" target="_blank">Github<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://twitter.com/temporalio" rel="noopener noreferrer" target="_blank">Twitter<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://www.youtube.com/c/Temporalio" rel="noopener noreferrer" target="_blank">YouTube<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://github.com/temporalio/documentation/blob/master/README.md" rel="noopener noreferrer" target="_blank">About the docs<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/cloud" rel="noopener noreferrer" target="_blank">Temporal Cloud<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/community#events" rel="noopener noreferrer" target="_blank">Meetups<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/community#workshops" rel="noopener noreferrer" target="_blank">Workshops<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://community.temporal.io/" rel="noopener noreferrer" target="_blank">Support forum<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://pages.temporal.io/ask-an-expert" rel="noopener noreferrer" target="_blank">Ask an expert<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="https://learn.temporal.io" rel="noopener noreferrer" target="_blank">Learn Temporal<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/blog" rel="noopener noreferrer" target="_blank">Blog<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/use-cases" rel="noopener noreferrer" target="_blank">Use cases<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://pages.temporal.io/newsletter-subscribe" rel="noopener noreferrer" target="_blank">Newsletter signup<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/security">Security</a></li><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/global-privacy-policy" rel="noopener noreferrer" target="_blank">Privacy policy</a></li><li class="footer__item"><a class="footer__link-item" href="https://docs.temporal.io/pdf/temporal-tos-2021-07-24.pdf" rel="noopener noreferrer" target="_blank">Terms of service<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="https://temporal.io/careers" rel="noopener noreferrer" target="_blank">We're hiring<svg aria-hidden="true" class="iconExternalLink_CtLf" height="13.5" viewbox="0 0 24 24" width="13.5"><path d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z" fill="currentColor"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_AhxU" href="https://temporal.io" rel="noopener noreferrer"><img alt="Temporal logo" class="footer__logo themedComponent_kHbU themedComponent--light_tqeZ" src="/img/favicon.png" width="24"/><img alt="Temporal logo" class="footer__logo themedComponent_kHbU themedComponent--dark_TUss" src="/img/favicon.png" width="24"/></a></div><div class="footer__copyright">Copyright © 2025 Temporal Technologies Inc.</div><noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-TSXFPF2" style="display:none;visibility:hidden" width="0"></iframe></noscript></div></div></footer></div>
<script src="https://cdn.jsdelivr.net/npm/pushfeedback@latest/dist/pushfeedback/pushfeedback.esm.js" type="module"></script>
<script>const feedbackButton=document.createElement("feedback-button");feedbackButton.setAttribute("project","6c1ptrxbky"),feedbackButton.setAttribute("modal-position","sidebar-right"),feedbackButton.setAttribute("button-style","light"),feedbackButton.setAttribute("button-position","center-right"),feedbackButton.setAttribute("privacy-policy-text","false"),feedbackButton.setAttribute("modal-title","Feedback"),feedbackButton.setAttribute("id","default"),feedbackButton.textContent="Feedback",document.body.appendChild(feedbackButton)</script></body>
</html>